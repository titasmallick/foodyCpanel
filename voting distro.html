<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name=" theme-color" content="#1cefff">
    <link href="https://fonts.googleapis.com/css?family=Beth+Ellen|Roboto&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="voting.css">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <script src="https://www.gstatic.com/firebasejs/7.9.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.9.0/firebase-firestore.js"></script>
    <title>voting</title>
</head>

<body>
    
    <!-- THIS ALGORITHM IS CREATED BY MR. TITAS MALLICK -->
    <p class="headerT">Polling</p>
    <em><p style="text-align: center; color: white;" id="accountDetails"></p></em>
    <p class="error"></p>
    <p class="accOButton" onclick="openAccset()">Account Setting</p>
    <div id="accountSection" class="accountSect" style="display: none;">
        <div id="logInFormClose" style="display: block;" class="forms logged-out">
        <form id="loginForm">
            <input type="text" name="email" id="logInEmail" placeholder="Email">
            <br>
            <input type="text" name="pass" id="logInPass" placeholder="Password">
            <br>
            <button>Login</button>

            <p onclick="opensignUpForm()" style="font-size: 0.8rem"><em>Don't have account? Sign Up</em></p>

        </form>
        </div>

        <div id="signUpFormOpen" style="display: none;" class="forms logged-out">
        <form id="signUp">
            <input type="text" name="email" id="signUpEmail" placeholder="Email">
            <br>
            <input type="text" name="pass" id="signUpPass" placeholder="Password">
            <br>
            <button>SignUp</button>
            <p onclick="openlogInForm()" style="font-size: 0.8rem"><em>Have account? Log in</em></p>
        </form>
        </div>

        <div id="logoutFormShow" style="display: none;" class="forms">
        <form id="logOut">
            <button>Logout</button>
        </form>
        </div>
        <p style="font-size: 0.8rem; text-align:  center; "><em>For details visit Account Page</em></p>
    </div>

    <p style="text-align: center;" id="showemailVerifictaiuonStatus"></p>
    <!-- LOGIN INFOS -->
    
    <!-- THIS ALGORITHM IS CREATED BY MR. TITAS MALLICK -->

    

    
    <!-- THIS ALGORITHM IS CREATED BY MR. TITAS MALLICK -->
    <div style="display: none;" id="showToVerifiedUsersOnly">
        <div class="votingDescription">
    <h4>foodyC. Voting </h4>
    <p> This Polling session is for ______. You must follow some rules to take part in the Polling. You must have an verified foodyC. Account. If you don't have one please create one and verify before you procceed. You must enter the valid voting key here that is published in the group to take part in the polling. You can only vote Once. And You must visit this link from facebook. Otherwise you can't vote.</p>
        </div>

    <div id="votingstatus">
        <h4 style="text-align: center;">Polling</h4>
        <p style="text-align: center;" id="pollingstatus"></p>
        <p style="text-align: center;" id="voteError"></p>
        
        <form id="enterVotingCode">
            <input type="text" name="code" id="votingCode" placeholder="Enter Voting Code">
            <br>
            <button id="votingCodeButton">Submit</button>
        </form>
        
        <div id="showvoting">
            <div id="votingTitle" class="eachcanddata">
            <p>Name</p>
            <p>Votes</p>
            <p>Poll</p>
            </div>
        </div>
        
    </div>

    </div>

    <p class="footerss">foodyC | Algorithm copyright Titas Mallick, 2020</p>
    <script>
        //TITAS's API	
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyCJJlIQl-JwiSNkUKFlCQsKOnuojapSNjs",
            authDomain: "contactform-f97c1.firebaseapp.com",
            databaseURL: "https://contactform-f97c1.firebaseio.com",
            projectId: "contactform-f97c1",
            storageBucket: "contactform-f97c1.appspot.com",
            messagingSenderId: "201569788456",
            appId: "1:201569788456:web:3ad8880745388517ed4b1d"
        };

        //<!-- THIS ALGORITHM IS CREATED BY MR. TITAS MALLICK -->

        //AMITS API
        // var firebaseConfig = {
        //   apiKey: "AIzaSyABeE_WQIhvoaWc5eLvBbhuz6-jdChl6no",
        //   authDomain: "data-fcbb2.firebaseapp.com",
        //   databaseURL: "https://data-fcbb2.firebaseio.com",
        //   projectId: "data-fcbb2",
        //   storageBucket: "data-fcbb2.appspot.com",
        //   messagingSenderId: "61759807849",
        //   appId: "1:61759807849:web:65f4c9c02d5ac4cd0b9df8",
        //   measurementId: "G-81SMMDDEEC"
        // };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.firestore();
    </script>

    <script src="voting.js"></script>
</body>

</html>
<!-- THIS ALGORITHM IS CREATED BY MR. TITAS MALLICK -->



<!-- FIRESTORE RULES
    match /VOTING/{document=**} {
    allow  read: if request.auth.uid !=null;
    allow write: if get(/databases/$(database)/documents/VotingStat/$(request.auth.uid)).data.votingCode == "1234" && get(/databases/$(database)/documents/VotingStat/$(request.auth.uid)).data.status != "USER HAS VOTED" && (get(/databases/$(database)/documents/VotingStat/$(request.auth.uid)).data.source == "android-app://m.facebook.com" || get(/databases/$(database)/documents/VotingStat/$(request.auth.uid)).data.source == "https://www.facebook.com/" || get(/databases/$(database)/documents/VotingStat/$(request.auth.uid)).data.source == "https://m.facebook.com/");
    } 
    match /VotingStat/{VotingStatId} {
    // allow  read, write;
    allow read, write: if request.auth.uid  == VotingStatId;
    }  
    -->